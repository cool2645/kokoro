/*!
 * kokoro - Headless music player written with Redux.
 * --------
 * @version 0.0.1
 * @homepage: https://github.com/cool2645/kokoro#readme
 * @license MIT
 * @author rikakomoe
 * 
 */
!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.kokoro=n():e.kokoro=n()}(window,function(){return function(e){var n={};function r(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=n,r.d=function(e,n,t){r.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,n){if(1&n&&(e=r(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(r.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)r.d(t,i,function(n){return e[n]}.bind(null,i));return t},r.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(n,"a",n),n},r.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},r.p="",r(r.s=0)}([function(e,n,r){"use strict";r.r(n);var t={};r.r(t),r.d(t,"SET_VOLUME",function(){return d}),r.d(t,"SET_SPEED",function(){return u}),r.d(t,"setVolume",function(){return l}),r.d(t,"setSpeed",function(){return s}),r.d(t,"PAUSE",function(){return a}),r.d(t,"PLAY",function(){return y}),r.d(t,"TOGGLE_PLAY",function(){return c}),r.d(t,"SET_CURRENT_TIME",function(){return p}),r.d(t,"pause",function(){return O}),r.d(t,"play",function(){return g}),r.d(t,"togglePlay",function(){return L}),r.d(t,"setCurrentTime",function(){return P}),r.d(t,"SET_PLAYLIST",function(){return _}),r.d(t,"CLEAR_PLAYLIST",function(){return b}),r.d(t,"setPlayOrder",function(){return A}),r.d(t,"nextPlayOrder",function(){return j}),r.d(t,"next",function(){return R}),r.d(t,"autoNext",function(){return Y}),r.d(t,"previous",function(){return w}),r.d(t,"setCurrentSong",function(){return k}),r.d(t,"setNextSong",function(){return D}),r.d(t,"removeSong",function(){return C}),r.d(t,"setPlaylist",function(){return M}),r.d(t,"clearPlaylist",function(){return U});var i="PLAY_ORDER_SINGLE",o="PLAY_ORDER_SHUFFLE",f=["PLAY_ORDER_LOOP",o,i],d="SET_VOLUME",u="SET_SPEED";function l(e){return{type:d,payload:e}}function s(e){return{type:u,payload:e}}var a="PAUSE",y="PLAY",c="TOGGLE_PLAY",p="SET_CURRENT_TIME";function O(){return{type:a}}function g(){return{type:y}}function L(){return{type:c}}function P(e){return{type:p,payload:e}}function h(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,t)}return r}function x(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?h(r,!0).forEach(function(n){I(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(r).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function I(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function v(e){return function(e){if(Array.isArray(e)){for(var n=0,r=new Array(e.length);n<e.length;n++)r[n]=e[n];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var _="SET_PLAYLIST",b="CLEAR_PLAYLIST";function E(e){var n=v(e);return n.sort(function(){return Math.random()-.5}),n}function m(e){return{type:_,payload:e}}function S(e,n){var r=v(e),t=e.indexOf(n);return-1!==t&&r.splice(t,1),r.unshift(n),r}function T(e){return e.src instanceof Array?e.src[0]:e.src}function A(e){return function(n,r){var t=r().playlist,i=x({},t,{playOrder:e});if(e===o){var f=E(t.orderedList),d=f.indexOf(t.playing);i.shuffledList=f,i.shuffledIndexOfPlaying=d}n(m(i))}}function j(){return function(e,n){var r=n().playlist.playOrder,t=f.indexOf(r),i=t+1>=f.length?0:t+1;A(f[i])(e,n)}}function R(){return function(e,n){var r=n().playlist,t=x({},r);if(r.playOrder===o){var i;if(r.shuffledIndexOfPlaying+1===r.shuffledList.length)(i=t.shuffledList).push.apply(i,v(E(r.orderedList)));t.shuffledIndexOfPlaying++,t.playing=t.shuffledList[t.shuffledIndexOfPlaying],t.orderedIndexOfPlaying=r.orderedList.indexOf(t.playing)}else r.orderedIndexOfPlaying+1===r.orderedList.length?t.orderedIndexOfPlaying=0:t.orderedIndexOfPlaying++,t.playing=t.orderedList[t.orderedIndexOfPlaying];t.historyList=S(r.historyList,t.playing),e(m(t))}}function Y(){return function(e,n){var r=n().playlist;r.playOrder===i?e(m(r)):R()(e,n)}}function w(){return function(e,n){var r=n().playlist,t=x({},r);if(r.playOrder===o){var i;if(r.shuffledIndexOfPlaying-1==-1)(i=t.shuffledList).unshift.apply(i,v(E(r.orderedList))),t.shuffledIndexOfPlaying+=r.orderedList;t.shuffledIndexOfPlaying--,t.playing=t.shuffledList[t.shuffledIndexOfPlaying],t.orderedIndexOfPlaying=r.orderedList.indexOf(t.playing)}else r.orderedIndexOfPlaying-1==-1?t.orderedIndexOfPlaying=r.orderedList.length-1:t.orderedIndexOfPlaying--,t.playing=t.orderedList[t.orderedIndexOfPlaying];t.historyList=S(r.historyList,t.playing),e(m(t))}}function k(e){return function(n,r){var t,i=r().playlist,f=x({},i);"number"==typeof e?t=i.orderedList[e]:"string"==typeof e?t=e:(t=T(e),f.songs[t]=e,-1===i.orderedList.indexOf(t)&&f.orderedList.splice(f.orderedIndexOfPlaying+1,0,t)),f.playing=t,f.orderedIndexOfPlaying=i.orderedList.indexOf(t),i.playOrder===o&&(f.shuffledList=E(f.orderedList),f.shuffledIndexOfPlaying=f.shuffledList.indexOf(t)),f.historyList=S(i.historyList,f.playing),n(m(f))}}function D(e){return function(n,r){var t,i=r().playlist,f=x({},i);if("number"==typeof e?t=i.orderedList[e]:"string"==typeof e?t=e:(t=T(e),f.songs[t]=e),t!==i.playing){var d=i.orderedList.indexOf(t);-1!==d&&f.orderedList.splice(d,1),f.orderedList.splice(f.orderedIndexOfPlaying+1,0,t),i.playOrder!==o||i.shuffledIndexOfPlaying+1<i.shuffledList.length&&i.shuffledList[i.shuffledIndexOfPlaying+1]===t||f.shuffledList.splice(i.shuffledIndexOfPlaying+1,0,t)}n(m(f))}}function C(e){return function(n,r){var t,i=r().playlist,f=x({},i);t="number"==typeof e?i.orderedList[e]:"string"==typeof e?e:T(e);var d=i.orderedList.slice(0,i.orderedIndexOfPlaying).filter(function(e){return e===t}).length;if(f.orderedList=i.orderedList.filter(function(e){return e!==t}),i.playOrder===o){var u=i.shuffledList.slice(0,i.shuffledIndexOfPlaying).filter(function(e){return e===t}).length;f.shuffledList=i.shuffledList.filter(function(e){return e!==t}),f.shuffledIndexOfPlaying=i.shuffledIndexOfPlaying-u,f.orderedIndexOfPlaying=f.orderedList.indexOf(f.shuffledList[f.shuffledIndexOfPlaying])}else f.orderedIndexOfPlaying=i.orderedIndexOfPlaying-d;f.playing=f.orderedList[f.orderedIndexOfPlaying],f.historyList=S(i.historyList,f.playing),n(m(f))}}function M(e,n,r){return function(t,i){var f,d=i().playlist,u=x({},d,{songs:{},orderedList:[],orderedIndexOfPlaying:null,shuffledList:[],shuffledIndexOfPlaying:null,playing:null,playOrder:r||d.playOrder}),l=!0,s=!1,a=void 0;try{for(var y,c=e[Symbol.iterator]();!(l=(y=c.next()).done);l=!0){var p=y.value,O=T(p);u.songs[O]=p,u.orderedList.push(O)}}catch(e){s=!0,a=e}finally{try{l||null==c.return||c.return()}finally{if(s)throw a}}u.orderedList.length&&(n?(f="number"==typeof n?u.orderedList[n]:"string"==typeof n?n:T(n),u.orderedIndexOfPlaying=u.orderedList.indexOf(f),u.playOrder===o&&(u.shuffledList=E(u.orderedList),u.shuffledIndexOfPlaying=u.shuffledList.indexOf(f),u.playing=f)):u.playOrder===o?(u.shuffledList=E(u.orderedList),u.shuffledIndexOfPlaying=0,u.playing=u.shuffledList[u.shuffledIndexOfPlaying],u.orderedIndexOfPlaying=u.orderedList.indexOf(u.playing)):(u.orderedIndexOfPlaying=0,u.playing=u.orderedList[u.orderedIndexOfPlaying]))}}function U(){return{type:b}}function G(e,n){for(var r=0;r<n.length;r++){var t=n[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function N(e,n,r){return n&&G(e.prototype,n),r&&G(e,r),e}r.d(n,"Kokoro",function(){return K}),r.d(n,"LYRICS_TYPE_LRC",function(){return"lrc"}),r.d(n,"LYRICS_TYPE_L2C",function(){return"l2c"}),r.d(n,"PLAY_ORDER_LOOP",function(){return"PLAY_ORDER_LOOP"}),r.d(n,"PLAY_ORDER_SINGLE",function(){return i}),r.d(n,"PLAY_ORDER_SHUFFLE",function(){return o}),r.d(n,"PLAY_ORDER",function(){return f}),r.d(n,"actions",function(){return t});var F={storageKey:"kokoro-store",audioTagId:"kokoro-sevice"},K=function(){function e(n){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e);var r=Object.assign({},F,n);this._storageKey=r.storageKey,this._mount(r.audioTagId)}return N(e,[{key:"ref",get:function(){return this._ref}}]),N(e,[{key:"destroy",value:function(){this._destroyed=!0,this._unmount()}},{key:"_mount",value:function(e){this._ref=document.createElement("audio"),e&&(this._ref.id=e),document.body.appendChild(this._ref)}},{key:"_unmount",value:function(){this._ref.remove()}}]),e}();n.default=K}]).default});
//# sourceMappingURL=kokoro.min.js.map