{"version":3,"file":"kokoro.esm.js","sources":["../src/actions.js","../src/index.js"],"sourcesContent":["export const PAUSE = 'PAUSE'\nexport const PLAY = 'PLAY'\nexport const TOGGLE_PLAY = 'TOGGLE_PLAY'\nexport const NEXT = 'NEXT'\nexport const PREVIOUS = 'PREVIOUS'\n\nexport const SET_CURRENT_TIME = 'SET_CURRENT_TIME'\n\nexport const SET_PLAY_ORDER = 'SET_PLAY_ORDER'\nexport const NEXT_PLAY_ORDER = 'NEXT_PLAY_ORDER'\n\nexport const SET_CURRENT_SONG = 'SET_CURRENT_SONG'\nexport const SET_NEXT_SONG = 'SET_NEXT_SONG'\n\nexport const REMOVE_SONG = 'REMOVE_SONG'\nexport const SET_PLAYLIST = 'SET_PLAYLIST'\nexport const CLEAR_PLAYLIST = 'CLEAR_PLAYLIST'\n\nexport const SET_VOLUME = 'SET_VOLUME'\n\nexport function pause () {\n  return {\n    type: PAUSE\n  }\n}\n\nexport function play () {\n  return {\n    type: PLAY\n  }\n}\n\nexport function togglePlay () {\n  return {\n    type: TOGGLE_PLAY\n  }\n}\n\nexport function next () {\n  return {\n    type: NEXT\n  }\n}\n\nexport function previous () {\n  return {\n    type: PREVIOUS\n  }\n}\n\nexport function setCurrentTime (time) {\n  return {\n    type: SET_CURRENT_TIME,\n    payload: time\n  }\n}\n\nexport function setPlayOrder (playOrder) {\n  return {\n    type: SET_PLAY_ORDER,\n    payload: playOrder\n  }\n}\n\nexport function nextPlayOrder () {\n  return {\n    type: NEXT_PLAY_ORDER\n  }\n}\n\nfunction getSongSrcOrNull (song) {\n  return typeof song === 'object' && song\n    ? song.src instanceof Array\n      ? song.src.length ? song.src[0] : null\n      : song.src\n    : song\n}\n\nexport function setCurrentSong (songOrIndex) {\n  const srcOrIndex = getSongSrcOrNull(songOrIndex)\n  return {\n    type: SET_CURRENT_SONG,\n    payload: srcOrIndex\n  }\n}\n\nexport function setNextSong (songOrIndex) {\n  const srcOrIndex = getSongSrcOrNull(songOrIndex)\n  return {\n    type: SET_NEXT_SONG,\n    payload: srcOrIndex\n  }\n}\n\nexport function removeSong (songOrIndex) {\n  const srcOrIndex = getSongSrcOrNull(songOrIndex)\n  return {\n    type: REMOVE_SONG,\n    payload: srcOrIndex\n  }\n}\n\nexport function setPlaylist (playlist) {\n  return {\n    type: SET_PLAYLIST,\n    payload: playlist\n  }\n}\n\nexport function clearPlaylist () {\n  return {\n    type: CLEAR_PLAYLIST\n  }\n}\n\nexport function setVolume (volume) {\n  return {\n    type: SET_VOLUME,\n    payload: volume\n  }\n}\n","const defaultOptions = {\n  storageKey: 'kokoro-store',\n  audioTagId: 'kokoro-sevice'\n}\n\nexport class Kokoro {\n  get ref () {\n    return this._ref\n  }\n\n  constructor (options) {\n    const op = Object.assign({}, defaultOptions, options)\n    this._storageKey = op.storageKey\n    this._mount(op.audioTagId)\n  }\n\n  destroy () {\n    this._destroyed = true\n    this._unmount()\n  }\n\n  _mount (id) {\n    this._ref = document.createElement('audio')\n    if (id) this._ref.id = id\n    document.body.appendChild(this._ref)\n  }\n\n  _unmount () {\n    this._ref.remove()\n  }\n}\n\nexport default Kokoro\n\nexport const LYRICS_TYPE_LRC = 'lrc'\nexport const LYRICS_TYPE_L2C = 'l2c'\nexport const PLAY_ORDER_LOOP = 'PLAY_ORDER_LOOP'\nexport const PLAY_ORDER_SINGLE = 'PLAY_ORDER_SINGLE'\nexport const PLAY_ORDER_RANDOM = 'PLAY_ORDER_RANDOM'\nexport const PLAY_ORDER = [\n  PLAY_ORDER_LOOP,\n  PLAY_ORDER_RANDOM,\n  PLAY_ORDER_SINGLE\n]\n\nexport * as actions from './actions'\n"],"names":["PAUSE","PLAY","TOGGLE_PLAY","NEXT","PREVIOUS","SET_CURRENT_TIME","SET_PLAY_ORDER","NEXT_PLAY_ORDER","SET_CURRENT_SONG","SET_NEXT_SONG","REMOVE_SONG","SET_PLAYLIST","CLEAR_PLAYLIST","SET_VOLUME","pause","type","play","togglePlay","next","previous","setCurrentTime","time","payload","setPlayOrder","playOrder","nextPlayOrder","getSongSrcOrNull","song","src","Array","length","setCurrentSong","songOrIndex","srcOrIndex","setNextSong","removeSong","setPlaylist","playlist","clearPlaylist","setVolume","volume","defaultOptions","storageKey","audioTagId","Kokoro","_ref","options","op","Object","assign","_storageKey","_mount","_destroyed","_unmount","id","document","createElement","body","appendChild","remove","LYRICS_TYPE_LRC","LYRICS_TYPE_L2C","PLAY_ORDER_LOOP","PLAY_ORDER_SINGLE","PLAY_ORDER_RANDOM","PLAY_ORDER"],"mappings":"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"}