{"version":3,"file":"kokoro.esm.js","sources":["../src/helpers.js","../src/actions/player.js","../src/actions/playing.js","../src/constants.js","../src/actions/playlist.js","../src/reducers/player.js","../src/reducers/playlist.js","../src/reducers/playing.js","../src/reducers/index.js","../src/index.js"],"sourcesContent":["export class Song {\n  static id (song) {\n    let src = song.src instanceof Array\n      ? encodeURI(song.src[0])\n      : encodeURI(song.src)\n\n    let good = decodeURI(src)\n    while (good !== src) {\n      src = good\n      good = decodeURI(src)\n    }\n    return encodeURI(good)\n  }\n}\n\nexport class TimeRanges {\n  static toArray (timeRanges) {\n    const length = timeRanges.length\n    const arr = []\n    for (let i = 0; i < length; i++) {\n      arr.push([\n        timeRanges.start(i),\n        timeRanges.end(i)\n      ])\n    }\n    return arr\n  }\n}\n\nexport function cloneDeep (obj) {\n  return JSON.parse(JSON.stringify(obj))\n}\n","export const SET_VOLUME = 'SET_VOLUME'\nexport const SET_SPEED = 'SET_SPEED'\n\nexport function setVolume (volume) {\n  return {\n    type: SET_VOLUME,\n    payload: volume\n  }\n}\n\nexport function setSpeed (speedRate) {\n  return {\n    type: SET_SPEED,\n    payload: speedRate\n  }\n}\n","export const PAUSE = 'PAUSE'\nexport const PLAY = 'PLAY'\nexport const SET_CURRENT_TIME = 'SET_CURRENT_TIME'\nexport const SET_TOTAL_TIME = 'SET_TOTAL_TIME'\nexport const SET_BUFFERED_TIME = 'SET_BUFFERED_TIME'\nexport const SET_TIMES = 'SET_TIMES'\nexport const NEXT_SRC = 'NEXT_SRC'\n\nexport function pause () {\n  return {\n    type: PAUSE\n  }\n}\n\nexport function play () {\n  return {\n    type: PLAY\n  }\n}\n\nexport function setCurrentTime (time) {\n  return {\n    type: SET_CURRENT_TIME,\n    payload: time\n  }\n}\n\nexport function setTotalTime (time) {\n  return {\n    type: SET_TOTAL_TIME,\n    payload: time\n  }\n}\n\nexport function setBufferedTime (buffered) {\n  return {\n    type: SET_BUFFERED_TIME,\n    payload: buffered\n  }\n}\n\nexport function setTimes (times) {\n  return {\n    type: SET_TIMES,\n    payload: times\n  }\n}\n\nexport function nextSrc () {\n  return {\n    type: NEXT_SRC\n  }\n}\n","export const PLAY_ORDER_LOOP = 'PLAY_ORDER_LOOP'\nexport const PLAY_ORDER_SINGLE = 'PLAY_ORDER_SINGLE'\nexport const PLAY_ORDER_SHUFFLE = 'PLAY_ORDER_SHUFFLE'\nexport const PLAY_ORDER = [\n  PLAY_ORDER_LOOP,\n  PLAY_ORDER_SHUFFLE,\n  PLAY_ORDER_SINGLE\n]\n","import { PLAY_ORDER, PLAY_ORDER_SHUFFLE, PLAY_ORDER_SINGLE } from '../constants'\nimport { Song } from '../helpers'\n\nexport const SET_PLAYLIST = 'SET_PLAYLIST'\nexport const CLEAR_PLAYLIST = 'CLEAR_PLAYLIST'\n\nfunction shuffle (original) {\n  const shuffled = [...original]\n  shuffled.sort(() => (Math.random() - 0.5))\n  return shuffled\n}\n\nfunction createSetPlaylistAction (payload) {\n  return {\n    type: SET_PLAYLIST,\n    payload\n  }\n}\n\nfunction pushHistory (historyList, song) {\n  if (!song) return historyList\n  const newHistoryList = [...historyList]\n  const historyIndex = historyList.indexOf(song)\n  if (historyIndex !== -1) {\n    newHistoryList.splice(historyIndex, 1)\n  }\n  newHistoryList.unshift(song)\n  return newHistoryList\n}\n\nexport function setPlayOrder (playOrder) {\n  return (dispatch, getState) => {\n    const { playlist } = getState()\n    const newPlaylistState = {\n      ...playlist,\n      playOrder\n    }\n    if (playOrder === PLAY_ORDER_SHUFFLE) {\n      const shuffledList = shuffle(playlist.orderedList)\n      const shuffledIndexOfPlaying = shuffledList.indexOf(playlist.playing)\n      newPlaylistState.shuffledList = shuffledList\n      newPlaylistState.shuffledIndexOfPlaying = shuffledIndexOfPlaying\n    }\n    dispatch(createSetPlaylistAction(newPlaylistState))\n  }\n}\n\nexport function nextPlayOrder () {\n  return (dispatch, getState) => {\n    const { playlist } = getState()\n    const currentPlayOrder = playlist.playOrder\n    const currentPlayOrderIndex = PLAY_ORDER.indexOf(currentPlayOrder)\n    const nextPlayOrderIndex = currentPlayOrderIndex + 1 >= PLAY_ORDER.length ? 0 : currentPlayOrderIndex + 1\n    const nextPlayOrder = PLAY_ORDER[nextPlayOrderIndex]\n    setPlayOrder(nextPlayOrder)(dispatch, getState)\n  }\n}\n\nexport function next () {\n  return (dispatch, getState) => {\n    const { playlist } = getState()\n    const newPlaylistState = { ...playlist }\n    if (playlist.playOrder === PLAY_ORDER_SHUFFLE) {\n      if (playlist.shuffledIndexOfPlaying + 1 === playlist.shuffledList.length) {\n        newPlaylistState.shuffledList.push(...shuffle(playlist.orderedList))\n      }\n      newPlaylistState.shuffledIndexOfPlaying++\n      newPlaylistState.playing = newPlaylistState.shuffledList[newPlaylistState.shuffledIndexOfPlaying]\n      newPlaylistState.orderedIndexOfPlaying = playlist.orderedList.indexOf(newPlaylistState.playing)\n    } else {\n      if (playlist.orderedIndexOfPlaying + 1 === playlist.orderedList.length) {\n        newPlaylistState.orderedIndexOfPlaying = 0\n      } else {\n        newPlaylistState.orderedIndexOfPlaying++\n      }\n      newPlaylistState.playing = newPlaylistState.orderedList[newPlaylistState.orderedIndexOfPlaying]\n    }\n    newPlaylistState.historyList = pushHistory(playlist.historyList, newPlaylistState.playing)\n    dispatch(createSetPlaylistAction(newPlaylistState))\n  }\n}\n\nexport function autoNext () {\n  return (dispatch, getState) => {\n    const { playlist } = getState()\n    if (playlist.playOrder === PLAY_ORDER_SINGLE) {\n      dispatch(createSetPlaylistAction(playlist))\n    } else {\n      next()(dispatch, getState)\n    }\n  }\n}\n\nexport function previous () {\n  return (dispatch, getState) => {\n    const { playlist } = getState()\n    const newPlaylistState = { ...playlist }\n    if (playlist.playOrder === PLAY_ORDER_SHUFFLE) {\n      if (playlist.shuffledIndexOfPlaying - 1 === -1) {\n        newPlaylistState.shuffledList.unshift(...shuffle(playlist.orderedList))\n        newPlaylistState.shuffledIndexOfPlaying += playlist.orderedList.length\n      }\n      newPlaylistState.shuffledIndexOfPlaying--\n      newPlaylistState.playing = newPlaylistState.shuffledList[newPlaylistState.shuffledIndexOfPlaying]\n      newPlaylistState.orderedIndexOfPlaying = playlist.orderedList.indexOf(newPlaylistState.playing)\n    } else {\n      if (playlist.orderedIndexOfPlaying - 1 === -1) {\n        newPlaylistState.orderedIndexOfPlaying = playlist.orderedList.length - 1\n      } else {\n        newPlaylistState.orderedIndexOfPlaying--\n      }\n      newPlaylistState.playing = newPlaylistState.orderedList[newPlaylistState.orderedIndexOfPlaying]\n    }\n    newPlaylistState.historyList = pushHistory(playlist.historyList, newPlaylistState.playing)\n    dispatch(createSetPlaylistAction(newPlaylistState))\n  }\n}\n\nexport function setCurrentSong (song) {\n  return (dispatch, getState) => {\n    const { playlist } = getState()\n    const newPlaylistState = { ...playlist }\n    let songId\n    if (typeof song === 'number') {\n      songId = playlist.orderedList[song]\n    } else if (typeof song === 'string') {\n      songId = song\n    } else {\n      songId = Song.id(song)\n      newPlaylistState.songs[songId] = song\n      if (playlist.orderedList.indexOf(songId) === -1) {\n        newPlaylistState.orderedList.splice(\n          newPlaylistState.orderedIndexOfPlaying + 1, 0, songId\n        )\n      }\n    }\n    newPlaylistState.playing = songId\n    newPlaylistState.orderedIndexOfPlaying = playlist.orderedList.indexOf(songId)\n    if (playlist.playOrder === PLAY_ORDER_SHUFFLE) {\n      newPlaylistState.shuffledList = shuffle(newPlaylistState.orderedList)\n      newPlaylistState.shuffledIndexOfPlaying = newPlaylistState.shuffledList.indexOf(songId)\n    }\n    newPlaylistState.historyList = pushHistory(playlist.historyList, newPlaylistState.playing)\n    dispatch(createSetPlaylistAction(newPlaylistState))\n  }\n}\n\nexport function setNextSong (song) {\n  return (dispatch, getState) => {\n    const { playlist } = getState()\n    const newPlaylistState = { ...playlist }\n    let songId\n    if (typeof song === 'number') {\n      songId = playlist.orderedList[song]\n    } else if (typeof song === 'string') {\n      songId = song\n    } else {\n      songId = Song.id(song)\n      newPlaylistState.songs[songId] = song\n    }\n    if (songId !== playlist.playing) {\n      if (playlist.playOrder !== PLAY_ORDER_SHUFFLE) {\n        const orderedIndexReduction = playlist.orderedList.slice(0, playlist.orderedIndexOfPlaying)\n          .filter(item => item === songId).length\n        newPlaylistState.orderedList = playlist.orderedList.filter(item => item !== songId)\n        newPlaylistState.orderedIndexOfPlaying -= orderedIndexReduction\n        newPlaylistState.orderedList.splice(\n          newPlaylistState.orderedIndexOfPlaying + 1, 0, songId\n        )\n      } else if (playlist.playOrder === PLAY_ORDER_SHUFFLE &&\n        !(playlist.shuffledIndexOfPlaying + 1 < playlist.shuffledList.length &&\n          playlist.shuffledList[playlist.shuffledIndexOfPlaying + 1] === songId\n        )\n      ) {\n        newPlaylistState.shuffledList.splice(playlist.shuffledIndexOfPlaying + 1, 0, songId)\n      }\n    }\n    dispatch(createSetPlaylistAction(newPlaylistState))\n  }\n}\n\nexport function removeSong (song) {\n  return (dispatch, getState) => {\n    const { playlist } = getState()\n    const newPlaylistState = { ...playlist }\n    let songId\n    if (typeof song === 'number') {\n      songId = playlist.orderedList[song]\n    } else if (typeof song === 'string') {\n      songId = song\n    } else {\n      songId = Song.id(song)\n    }\n    const orderedIndexReduction = playlist.orderedList.slice(0, playlist.orderedIndexOfPlaying)\n      .filter(item => item === songId).length\n    newPlaylistState.orderedList = playlist.orderedList.filter(item => item !== songId)\n    if (playlist.playOrder === PLAY_ORDER_SHUFFLE) {\n      const shuffledIndexReduction = playlist.shuffledList.slice(0, playlist.shuffledIndexOfPlaying)\n        .filter(item => item === songId).length\n      newPlaylistState.shuffledList = playlist.shuffledList.filter(item => item !== songId)\n      newPlaylistState.shuffledIndexOfPlaying -= shuffledIndexReduction\n      if (newPlaylistState.shuffledIndexOfPlaying >= newPlaylistState.shuffledList.length) {\n        newPlaylistState.shuffledIndexOfPlaying = newPlaylistState.shuffledList.length - 1 > 0\n          ? newPlaylistState.shuffledList.length - 1 : 0\n      }\n      newPlaylistState.orderedIndexOfPlaying = newPlaylistState.shuffledList.length - 1 > 0\n        ? newPlaylistState.orderedList.indexOf(\n          newPlaylistState.shuffledList[newPlaylistState.shuffledIndexOfPlaying]\n        ) : 0\n    } else {\n      newPlaylistState.orderedIndexOfPlaying -= orderedIndexReduction\n      if (newPlaylistState.orderedIndexOfPlaying >= newPlaylistState.orderedList.length) {\n        newPlaylistState.orderedIndexOfPlaying = newPlaylistState.orderedList.length - 1 > 0\n          ? newPlaylistState.orderedList.length - 1 : 0\n      }\n    }\n    newPlaylistState.playing = newPlaylistState.orderedList.length\n      ? newPlaylistState.orderedList[newPlaylistState.orderedIndexOfPlaying] : null\n    newPlaylistState.historyList = pushHistory(playlist.historyList, newPlaylistState.playing)\n    dispatch(createSetPlaylistAction(newPlaylistState))\n  }\n}\n\nexport function setPlaylist (songs, currentSong, playOrder) {\n  return (dispatch, getState) => {\n    const { playlist } = getState()\n    const newPlaylistState = {\n      ...playlist,\n      songs: {},\n      orderedList: [],\n      orderedIndexOfPlaying: null,\n      shuffledList: [],\n      shuffledIndexOfPlaying: null,\n      playing: null,\n      playOrder: playOrder || playlist.playOrder\n    }\n    for (const song of songs) {\n      const songId = Song.id(song)\n      newPlaylistState.songs[songId] = song\n      newPlaylistState.orderedList.push(songId)\n    }\n    if (newPlaylistState.orderedList.length) {\n      let songId\n      let currentSongValid = false\n      if (typeof currentSong === 'number') {\n        songId = newPlaylistState.orderedList[currentSong]\n        currentSongValid = true\n      } else if (typeof currentSong === 'string') {\n        songId = currentSong\n        currentSongValid = true\n      } else if (currentSong) {\n        songId = Song.id(currentSong)\n        currentSongValid = true\n      }\n      if (currentSongValid) {\n        newPlaylistState.orderedIndexOfPlaying = newPlaylistState.orderedList.indexOf(songId)\n        if (newPlaylistState.playOrder === PLAY_ORDER_SHUFFLE) {\n          newPlaylistState.shuffledList = shuffle(newPlaylistState.orderedList)\n          newPlaylistState.shuffledIndexOfPlaying = newPlaylistState.shuffledList.indexOf(songId)\n        }\n        newPlaylistState.playing = songId\n      } else {\n        if (newPlaylistState.playOrder === PLAY_ORDER_SHUFFLE) {\n          newPlaylistState.shuffledList = shuffle(newPlaylistState.orderedList)\n          newPlaylistState.shuffledIndexOfPlaying = 0\n          newPlaylistState.playing = newPlaylistState.shuffledList[newPlaylistState.shuffledIndexOfPlaying]\n          newPlaylistState.orderedIndexOfPlaying = newPlaylistState.orderedList.indexOf(newPlaylistState.playing)\n        } else {\n          newPlaylistState.orderedIndexOfPlaying = 0\n          newPlaylistState.playing = newPlaylistState.orderedList[newPlaylistState.orderedIndexOfPlaying]\n        }\n      }\n      newPlaylistState.historyList = pushHistory(playlist.historyList, newPlaylistState.playing)\n    }\n    dispatch(createSetPlaylistAction(newPlaylistState))\n  }\n}\n\nexport function clearPlaylist () {\n  return {\n    type: CLEAR_PLAYLIST\n  }\n}\n","import { SET_SPEED, SET_VOLUME } from '../actions'\n\nconst initialState = {\n  volume: 1,\n  speed: 1\n}\n\nexport default function (state = initialState, action) {\n  switch (action.type) {\n    case SET_VOLUME:\n      return {\n        ...state,\n        volume: action.payload\n      }\n    case SET_SPEED:\n      return {\n        ...state,\n        speed: action.payload\n      }\n    default:\n      return state\n  }\n}\n","import { cloneDeep } from '../helpers'\nimport { CLEAR_PLAYLIST, SET_PLAYLIST } from '../actions'\nimport { PLAY_ORDER_LOOP } from '../constants'\n\nconst initialState = {\n  songs: {},\n  orderedList: [],\n  orderedIndexOfPlaying: null,\n  shuffledList: [],\n  shuffledIndexOfPlaying: null,\n  historyList: [],\n  playing: null,\n  playOrder: PLAY_ORDER_LOOP\n}\n\nexport default function (state = initialState, action) {\n  switch (action.type) {\n    case SET_PLAYLIST:\n      return cloneDeep(action.payload)\n    case CLEAR_PLAYLIST:\n      return {\n        ...cloneDeep(initialState),\n        playOrder: state.playOrder\n      }\n    default:\n      return state\n  }\n}\n","import { cloneDeep } from '../helpers'\nimport {\n  CLEAR_PLAYLIST,\n  NEXT_SRC,\n  PAUSE,\n  PLAY,\n  SET_BUFFERED_TIME,\n  SET_CURRENT_TIME,\n  SET_PLAYLIST, SET_TIMES,\n  SET_TOTAL_TIME\n} from '../actions'\n\nconst initialState = {\n  src: '',\n  srcIndex: 0,\n  song: null,\n  currentTime: 0,\n  totalTime: 0,\n  bufferedTime: null,\n  paused: true\n}\n\nexport { initialState as initialPlayingState }\n\nexport default function (state = initialState, action) {\n  switch (action.type) {\n    case CLEAR_PLAYLIST:\n      return cloneDeep(initialState)\n    case SET_PLAYLIST:\n      return {\n        ...state,\n        song: action.payload.playing\n          ? cloneDeep(action.payload.songs[action.payload.playing]) : null,\n        src: action.payload.playing\n          ? action.payload.songs[action.payload.playing].src instanceof Array\n            ? action.payload.songs[action.payload.playing].src[0]\n            : action.payload.songs[action.payload.playing].src\n          : '',\n        srcIndex: 0\n      }\n    case NEXT_SRC: {\n      // condition is always true\n      // const srcId = state.song.src instanceof Array\n      //  ? state.srcIndex + 1 < state.song.src.length\n      //    ? state.srcIndex + 1 : 0\n      //  : 0\n      const srcId = state.srcIndex + 1\n      // if (srcId !== state.srcIndex && state.song.src instanceof Array) {\n      return {\n        ...cloneDeep(state),\n        srcIndex: srcId,\n        src: state.song.src[srcId]\n      }\n      // } else return state\n    }\n    case SET_CURRENT_TIME:\n      return {\n        ...cloneDeep(state),\n        currentTime: action.payload\n      }\n    case SET_TOTAL_TIME:\n      return {\n        ...cloneDeep(state),\n        totalTime: action.payload\n      }\n    case SET_BUFFERED_TIME:\n      return {\n        ...cloneDeep(state),\n        bufferedTime: cloneDeep(action.payload)\n      }\n    case SET_TIMES:\n      return {\n        ...cloneDeep(state),\n        currentTime: action.payload.currentTime,\n        totalTime: action.payload.totalTime,\n        bufferedTime: cloneDeep(action.payload.bufferedTime)\n      }\n    case PAUSE:\n      return {\n        ...cloneDeep(state),\n        paused: true\n      }\n    case PLAY:\n      return {\n        ...cloneDeep(state),\n        paused: false\n      }\n    default:\n      return state\n  }\n}\n","import { combineReducers } from 'redux'\n\nimport { cloneDeep } from '../helpers'\nimport player from './player'\nimport playlist from './playlist'\nimport playing, { initialPlayingState } from './playing'\n\nexport default combineReducers({\n  player,\n  playing,\n  playlist\n})\n\nexport function saveState (state) {\n  const exportedState = cloneDeep(state)\n  delete exportedState.playing\n  return exportedState\n}\n\nexport function loadState (state) {\n  const importedState = cloneDeep(state)\n  importedState.playing = initialPlayingState\n  importedState.playing.song = importedState.playlist.playing\n    ? importedState.playlist.songs[importedState.playlist.playing] : null\n  importedState.playing.src = importedState.playing.song\n    ? importedState.playing.song.src instanceof Array\n      ? importedState.playing.song.src[0]\n      : importedState.playing.song.src\n    : null\n  return importedState\n}\n","import { applyMiddleware, createStore } from 'redux'\nimport thunk from 'redux-thunk'\nimport { composeWithDevTools } from 'redux-devtools-extension'\n\nimport { version } from '../package'\nimport reducers, { loadState, saveState } from './reducers'\nimport {\n  autoNext, clearPlaylist, next, nextPlayOrder,\n  nextSrc,\n  pause,\n  play, previous, removeSong,\n  setBufferedTime, setCurrentSong, setCurrentTime, setNextSong,\n  setPlaylist, setPlayOrder,\n  setSpeed, setTimes,\n  setTotalTime,\n  setVolume\n} from './actions'\nimport { Song, TimeRanges } from './helpers'\n\nexport class Kokoro {\n  get ref () {\n    return this._ref\n  }\n\n  get store () {\n    return this._store\n  }\n\n  get _dispatch () {\n    return this._store.dispatch\n  }\n\n  get getState () {\n    return this._store.getState\n  }\n\n  get destroyed () {\n    return this._destroyed || false\n  }\n\n  get version () {\n    return version\n  }\n\n  constructor (initializeState) {\n    this._store = initializeState\n      ? createStore(reducers, loadState(initializeState), composeWithDevTools(applyMiddleware(thunk)))\n      : createStore(reducers, composeWithDevTools(applyMiddleware(thunk)))\n\n    this._ref = new window.Audio()\n\n    this._ref.addEventListener('canplay', () => {\n      this._dispatch(setBufferedTime(TimeRanges.toArray(this._ref.buffered)))\n    })\n    this._ref.addEventListener('canplaythrough', () => {\n      this._dispatch(setBufferedTime(TimeRanges.toArray(this._ref.buffered)))\n    })\n    this._ref.addEventListener('durationchange', () => {\n      this._dispatch(setTotalTime(this._ref.duration))\n    })\n    this._ref.addEventListener('ended', () => {\n      this._dispatch(autoNext())\n      this._onSrcProbablyChanged()\n      this._triggerPlay()\n    })\n    this._ref.addEventListener('error', () => {\n      const state = this.getState()\n      if (state.playing.song === null) return\n      if (state.playing.song.src instanceof Array &&\n        state.playing.srcIndex + 1 < state.playing.song.src.length) {\n        this._dispatch(nextSrc())\n      } else {\n        this._dispatch(autoNext())\n      }\n      this._onSrcProbablyChanged()\n      this._triggerPlay()\n    })\n    this._ref.addEventListener('loadedmetadata', () => {\n      this._dispatch(setTotalTime(this._ref.duration))\n    })\n    this._ref.addEventListener('pause', () => {\n      this._dispatch(pause())\n    })\n    this._ref.addEventListener('play', () => {\n      this._dispatch(play())\n    })\n    this._ref.addEventListener('progress', () => {\n      this._dispatch(setBufferedTime(TimeRanges.toArray(this._ref.buffered)))\n    })\n    this._ref.addEventListener('ratechange', () => {\n      this._dispatch(setSpeed(this._ref.playbackRate))\n    })\n    this._ref.addEventListener('timeupdate', () => {\n      this._dispatch(setTimes({\n        currentTime: this._ref.currentTime,\n        totalTime: this._ref.duration,\n        bufferedTime: TimeRanges.toArray(this._ref.buffered)\n      }))\n    })\n    this._ref.addEventListener('volumechange', () => {\n      if (this._ref.muted) this._dispatch(setVolume(0))\n      else this._dispatch(setVolume(this._ref.volume))\n    })\n\n    this._listeners = []\n  }\n\n  destroy () {\n    this._destroyed = true\n    for (const item of this._listeners) {\n      item.unsub()\n    }\n    this._listeners = []\n    this.unmount()\n    this._ref.removeAttribute('src')\n    this._ref.load()\n  }\n\n  subscribe (listener) {\n    const o = this._listeners.find(item => item.listener === listener)\n    if (o) {\n      return o.unsub\n    }\n    const unsub = this._store.subscribe(() => listener(this.getState()))\n    this._listeners.push({\n      listener,\n      unsub\n    })\n    return unsub\n  }\n\n  unsubscribe (listener) {\n    const o = this._listeners.find(item => item.listener === listener)\n    if (o) {\n      o.unsub()\n      this._listeners = this._listeners.filter(item => item.listener !== listener)\n    }\n  }\n\n  dumpState () {\n    return saveState(this.getState())\n  }\n\n  mount (parentNode, id) {\n    if (typeof parentNode === 'string' || id) {\n      this._ref.id = typeof parentNode === 'string'\n        ? parentNode : id\n    }\n    const parent = parentNode instanceof window.HTMLElement\n      ? parentNode : document.body\n    parent.appendChild(this._ref)\n  }\n\n  unmount () {\n    this._ref.remove()\n  }\n\n  _onSrcProbablyChanged () {\n    const state = this.getState()\n    if (Song.id(state.playing) !== Song.id(this._ref)) {\n      if (state.playing.src) this._ref.src = state.playing.src\n      else {\n        this._ref.removeAttribute('src')\n        this._ref.load()\n      }\n    }\n  }\n\n  _triggerPlay () {\n    this._ref.currentTime = 0\n    this._ref.play()\n  }\n\n  pause () {\n    this._ref.pause()\n  }\n\n  play () {\n    this._ref.play()\n  }\n\n  togglePlay () {\n    const state = this.getState()\n    if (state.playing.paused) {\n      this._ref.play()\n    } else this._ref.pause()\n  }\n\n  setCurrentTime (time) {\n    this._ref.currentTime = time\n    this._dispatch(setCurrentTime(time))\n  }\n\n  next () {\n    this._dispatch(next())\n    this._onSrcProbablyChanged()\n    this._triggerPlay()\n  }\n\n  previous () {\n    this._dispatch(previous())\n    this._onSrcProbablyChanged()\n    this._triggerPlay()\n  }\n\n  setPlayOrder (playOrder) {\n    this._dispatch(setPlayOrder(playOrder))\n  }\n\n  nextPlayOrder () {\n    this._dispatch(nextPlayOrder())\n  }\n\n  setCurrentSong (song) {\n    this._dispatch(setCurrentSong(song))\n    this._onSrcProbablyChanged()\n    this._triggerPlay()\n  }\n\n  setNextSong (song) {\n    this._dispatch(setNextSong(song))\n  }\n\n  removeSong (song) {\n    this._dispatch(removeSong(song))\n    this._onSrcProbablyChanged()\n  }\n\n  setPlaylist (songs, currentSong, playOrder) {\n    this._dispatch(setPlaylist(songs, currentSong, playOrder))\n    this._onSrcProbablyChanged()\n  }\n\n  clearPlaylist () {\n    this._dispatch(clearPlaylist())\n    this._onSrcProbablyChanged()\n  }\n\n  setVolume (volume) {\n    this._dispatch(setVolume(volume))\n    this._ref.volume = volume\n  }\n\n  setSpeed (speedRate) {\n    this._dispatch(setSpeed(speedRate))\n    this._ref.playbackRate = speedRate\n  }\n}\n\nexport default Kokoro\n\nexport * from './constants'\nexport * as actions from './actions'\nexport * as helpers from './helpers'\n"],"names":["Song","song","src","Array","encodeURI","good","decodeURI","TimeRanges","timeRanges","length","arr","i","push","start","end","cloneDeep","obj","JSON","parse","stringify","SET_VOLUME","SET_SPEED","setVolume","volume","type","payload","setSpeed","speedRate","PAUSE","PLAY","SET_CURRENT_TIME","SET_TOTAL_TIME","SET_BUFFERED_TIME","SET_TIMES","NEXT_SRC","pause","play","setCurrentTime","time","setTotalTime","setBufferedTime","buffered","setTimes","times","nextSrc","PLAY_ORDER_LOOP","PLAY_ORDER_SINGLE","PLAY_ORDER_SHUFFLE","PLAY_ORDER","SET_PLAYLIST","CLEAR_PLAYLIST","shuffle","original","shuffled","sort","Math","random","createSetPlaylistAction","pushHistory","historyList","newHistoryList","historyIndex","indexOf","splice","unshift","setPlayOrder","playOrder","dispatch","getState","playlist","newPlaylistState","shuffledList","orderedList","shuffledIndexOfPlaying","playing","nextPlayOrder","currentPlayOrder","currentPlayOrderIndex","nextPlayOrderIndex","next","orderedIndexOfPlaying","autoNext","previous","setCurrentSong","songId","id","songs","setNextSong","orderedIndexReduction","slice","filter","item","removeSong","shuffledIndexReduction","setPlaylist","currentSong","currentSongValid","clearPlaylist","initialState","speed","state","action","srcIndex","currentTime","totalTime","bufferedTime","paused","srcId","combineReducers","player","saveState","exportedState","loadState","importedState","initialPlayingState","Kokoro","_ref","_store","_destroyed","version","initializeState","createStore","reducers","composeWithDevTools","applyMiddleware","thunk","window","Audio","addEventListener","_dispatch","toArray","duration","_onSrcProbablyChanged","_triggerPlay","playbackRate","muted","_listeners","unsub","unmount","removeAttribute","load","listener","o","find","subscribe","parentNode","parent","HTMLElement","document","body","appendChild","remove"],"mappings":"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"}